<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Katalog Produk | Customin.co</title>
  <meta name="description" content="Katalog produk furniture custom: kursi, meja, lemari, rak, dan lainnya.">
  <link rel="icon" href="/OG/favicon-customin-furniture-custom.ico" />

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <script src="https://code.iconify.design/3/3.1.1/iconify.min.js" defer></script>

  <link rel="stylesheet" href="/katalog.css" />
  <link rel="stylesheet" href="/assets/cart.css" />

  <!-- Fix foto 1:1 + footer tombol -->
  <style>
    .product-img{ position:relative; display:block; width:100%; aspect-ratio:1/1; }
    .product-img::before{ content:""; display:block; padding-top:100%; }
    .product-img img{ position:absolute; inset:0; width:100%; height:100%; object-fit:cover; display:block; }

    .product-footer{ display:flex; align-items:center; justify-content:space-between; gap:10px; }
    .product-price{ color:var(--accent); font-weight:700; font-size:14px; flex:1 1 auto; min-width:0; }
    .product-footer .cta-group{ display:flex; gap:8px; flex:0 0 auto; white-space:nowrap; }
    .order-btn{ display:inline-flex; align-items:center; justify-content:center; height:34px; padding:0 12px; border:1px solid #ddd; border-radius:12px; background:#fff; font-size:12px; font-weight:600; text-decoration:none; box-shadow:0 2px 4px rgba(0,0,0,.05); cursor:pointer; }
    .order-btn:active{ transform:translateY(1px); }
    .nav-item{ position:relative; }
  </style>
</head>
<body>
  <div class="main-wrapper">
    <div class="bio-card">

      <header class="page-head">
        <nav class="crumbs" aria-label="Breadcrumb">
          <ol>
            <li><a href="/">Home</a></li>
            <li class="sep" aria-hidden="true">›</li>
            <li aria-current="page" id="crumbCurrent">Produk</li>
          </ol>
        </nav>
        <h1 class="page-title">Katalog Produk</h1>
      </header>

      <main class="card-content" id="main">
        <!-- Filter -->
        <section class="filters">
          <div class="search-wrap">
            <span class="iconify" data-icon="mdi:magnify"></span>
            <input id="q" type="search" placeholder="Cari produk… (mis. kursi, meja)" autocomplete="off">
          </div>

          <div class="selects">
            <label class="select">
              <span class="select-label">Kategori</span>
              <select id="catSelect">
                <option value="*">Semua Kategori</option>
                <option value="Kursi">Kursi</option>
                <option value="Meja">Meja</option>
                <option value="Lemari">Lemari</option>
                <option value="Rak">Rak</option>
              </select>
            </label>

            <label class="select">
              <span class="select-label">Tag</span>
              <select id="tagSelect" multiple>
                <option value="Minimalis">Minimalis</option>
                <option value="Jati Solid">Jati Solid</option>
                <option value="Outdoor">Outdoor</option>
                <option value="Natural">Natural</option>
              </select>
            </label>
          </div>

          <p class="hint">Tip: tahan <b>Ctrl/Cmd</b> untuk pilih banyak tag.</p>
        </section>

        <!-- Grid -->
        <section class="produk-grid" id="grid">
          <!-- 1 -->
          <article class="product-card" data-kategori="Kursi" data-tags="Minimalis,Jati Solid,Natural">
            <a class="product-img" href="/produk/kursi-lipat-jati.html">
              <img src="/produk/foto/kursi-lipat.webp" alt="Kursi Lipat Jati">
              <span class="badge">Baru</span>
            </a>
            <div class="product-content">
              <h2 class="product-title"><a href="/produk/kursi-lipat-jati.html">Kursi Lipat Jati</a></h2>
              <div class="product-footer">
                <div class="product-price">Rp 183.000</div>
                <div class="cta-group">
                  <button type="button" class="order-btn add-to-cart"
                          data-id="SKU-KURSI-LIPAT"
                          data-name="Kursi Lipat Jati"
                          data-price="183000"
                          data-image="/produk/foto/kursi-lipat.webp">+ Keranjang</button>
                  <a href="/produk/kursi-lipat-jati.html" class="order-btn">Detail</a>
                </div>
              </div>
            </div>
          </article>

          <!-- 2 -->
          <article class="product-card" data-kategori="Meja" data-tags="Minimalis,Natural">
            <a class="product-img" href="#">
              <img src="https://images.unsplash.com/photo-1515378791036-0648a3ef77b2?w=600&q=80" alt="Meja Kerja Minimalis">
            </a>
            <div class="product-content">
              <h2 class="product-title"><a href="#">Meja Kerja Minimalis</a></h2>
              <div class="product-footer">
                <div class="product-price">Rp 1.250.000</div>
                <div class="cta-group">
                  <button type="button" class="order-btn add-to-cart"
                          data-id="SKU-MEJA-KERJA-01"
                          data-name="Meja Kerja Minimalis"
                          data-price="1250000"
                          data-image="https://images.unsplash.com/photo-1515378791036-0648a3ef77b2?w=600&q=80">+ Keranjang</button>
                  <a href="#" class="order-btn">Detail</a>
                </div>
              </div>
            </div>
          </article>

          <!-- 3 -->
          <article class="product-card" data-kategori="Lemari" data-tags="Jati Solid,Natural">
            <a class="product-img" href="#">
              <img src="https://images.unsplash.com/photo-1519710164239-da123dc03ef4?w=600&q=80" alt="Lemari Pakaian Jati">
              <span class="badge badge-sale">Promo</span>
            </a>
            <div class="product-content">
              <h2 class="product-title"><a href="#">Lemari Pakaian Jati</a></h2>
              <div class="product-footer">
                <div class="product-price">Rp 3.800.000</div>
                <div class="cta-group">
                  <button type="button" class="order-btn add-to-cart"
                          data-id="SKU-LEMARI-JATI-01"
                          data-name="Lemari Pakaian Jati"
                          data-price="3800000"
                          data-image="https://images.unsplash.com/photo-1519710164239-da123dc03ef4?w=600&q=80">+ Keranjang</button>
                  <a href="#" class="order-btn">Detail</a>
                </div>
              </div>
            </div>
          </article>

          <!-- 4 -->
          <article class="product-card" data-kategori="Rak" data-tags="Minimalis,Natural">
            <a class="product-img" href="#">
              <img src="https://images.unsplash.com/photo-1519681393784-d120267933ba?w=600&q=80" alt="Rak Buku Minimalis">
            </a>
            <div class="product-content">
              <h2 class="product-title"><a href="#">Rak Buku Minimalis</a></h2>
              <div class="product-footer">
                <div class="product-price">Rp 690.000</div>
                <div class="cta-group">
                  <button type="button" class="order-btn add-to-cart"
                          data-id="SKU-RAK-BUKU-01"
                          data-name="Rak Buku Minimalis"
                          data-price="690000"
                          data-image="https://images.unsplash.com/photo-1519681393784-d120267933ba?w=600&q=80">+ Keranjang</button>
                  <a href="#" class="order-btn">Detail</a>
                </div>
              </div>
            </div>
          </article>

          <!-- 5 -->
          <article class="product-card" data-kategori="Kursi" data-tags="Outdoor,Jati Solid">
            <a class="product-img" href="#">
              <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=600&q=80" alt="Kursi Teras Outdoor">
            </a>
            <div class="product-content">
              <h2 class="product-title"><a href="#">Kursi Teras Outdoor</a></h2>
              <div class="product-footer">
                <div class="product-price">Rp 480.000</div>
                <div class="cta-group">
                  <button type="button" class="order-btn add-to-cart"
                          data-id="SKU-KURSI-OUTDOOR-01"
                          data-name="Kursi Teras Outdoor"
                          data-price="480000"
                          data-image="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=600&q=80">+ Keranjang</button>
                  <a href="#" class="order-btn">Detail</a>
                </div>
              </div>
            </div>
          </article>

          <!-- 6 -->
          <article class="product-card" data-kategori="Meja" data-tags="Minimalis,Natural">
            <a class="product-img" href="#">
              <img src="https://images.unsplash.com/photo-1555041469-a586c61ea9bc?w=600&q=80" alt="Meja Konsol Kayu">
            </a>
            <div class="product-content">
              <h2 class="product-title"><a href="#">Meja Konsol Kayu</a></h2>
              <div class="product-footer">
                <div class="product-price">Rp 1.450.000</div>
                <div class="cta-group">
                  <button type="button" class="order-btn add-to-cart"
                          data-id="SKU-MEJA-KONSOL-01"
                          data-name="Meja Konsol Kayu"
                          data-price="1450000"
                          data-image="https://images.unsplash.com/photo-1555041469-a586c61ea9bc?w=600&q=80">+ Keranjang</button>
                  <a href="#" class="order-btn">Detail</a>
                </div>
              </div>
            </div>
          </article>
        </section>
      </main>

      <!-- NAV -->
      <nav class="in-card-nav" aria-label="Navigasi utama">
        <div class="nav-content">
          <a href="/" class="nav-item" title="Home" aria-label="Home"><span class="iconify" data-icon="mdi:home-outline"></span></a>
          <button type="button" class="menu-button" id="menuButton" aria-controls="popupMenu" aria-expanded="false" aria-label="Menu"><span class="iconify" data-icon="mdi:view-grid-outline"></span></button>
          <a href="/keranjang" class="nav-item js-cart-btn" title="Keranjang" aria-label="Keranjang">
            <span class="iconify" data-icon="mdi:cart-outline"></span>
            <span class="cart-badge" data-cart-count>0</span>
          </a>
        </div>
      </nav>

    </div>
  </div>

  <div class="popup-menu" id="popupMenu"></div>

  <script src="/assets/cart.js" defer></script>

  <script>
    // Popup menu
    (function(){
      const btn=document.getElementById('menuButton'), pop=document.getElementById('popupMenu');
      if(!btn||!pop) return;
      pop.innerHTML=`<ul>
        <li><a href="/kategori/"><span class="iconify" data-icon="mdi:shape-outline"></span>Kategori</a></li>
        <li><a href="/tag/"><span class="iconify" data-icon="mdi:tag-outline"></span>Tag</a></li>
        <li><a href="/kontak.html"><span class="iconify" data-icon="mdi:phone-outline"></span>Kontak</a></li>
      </ul>`;
      btn.addEventListener('click',e=>{e.stopPropagation();pop.classList.toggle('show');btn.setAttribute('aria-expanded',pop.classList.contains('show'))});
      document.addEventListener('click',e=>{if(!pop.contains(e.target)) pop.classList.remove('show')});
    })();

    // Filter + sinkron URL + breadcrumb update
    (function(){
      const q=document.getElementById('q');
      const cat=document.getElementById('catSelect');
      const tag=document.getElementById('tagSelect');
      const cards=[...document.querySelectorAll('.product-card')];
      const crumbCurrent=document.getElementById('crumbCurrent');

      const params=new URLSearchParams(location.search);
      if(params.get('q')) q.value=params.get('q');
      if(params.get('kategori')) cat.value=params.get('kategori');
      if(params.get('tag')){
        const arr=params.get('tag').split(',').map(decodeURIComponent);
        [...tag.options].forEach(o=>{ if(arr.includes(o.value)) o.selected=true; });
      }

      const syncURL=(kategori,tags,keyword)=>{
        const p=new URLSearchParams();
        if(keyword) p.set('q',keyword);
        if(kategori && kategori!=='*') p.set('kategori',kategori);
        if(tags.length) p.set('tag',tags.join(','));
        history.replaceState(null,'', p.toString()?`?${p.toString()}`:location.pathname);
      };

      const apply=()=>{
        const keyword=q.value.trim().toLowerCase();
        const kategori=cat.value;
        const tags=[...tag.selectedOptions].map(o=>o.value);

        const tagTrail=tags.length?' · '+tags.map(t=>`#${t}`).join(', '):'';
        crumbCurrent.textContent=(kategori==='*'?'Produk':`Produk › ${kategori}`)+tagTrail;

        cards.forEach(card=>{
          const title=(card.querySelector('.product-title')?.innerText||'').toLowerCase();
          const k=card.dataset.kategori||'';
          const t=(card.dataset.tags||'').split(',').map(s=>s.trim());
          const matchQ=!keyword||title.includes(keyword);
          const matchK=kategori==='*'||k===kategori;
          const matchT=tags.length===0||tags.some(x=>t.includes(x));
          card.style.display=(matchQ&&matchK&&matchT)?'':'none';
        });

        syncURL(kategori,tags,keyword);
      };

      q.addEventListener('input',apply);
      cat.addEventListener('change',apply);
      tag.addEventListener('change',apply);
      apply();
    })();
  </script>
</body>
</html>
